<!DOCTYPE html>
<html>
<head>
  <title>Password Match</title>
  <link href="forms.css" rel="stylesheet" />
  <script src="/js/jquery-1.6.4.js" type="text/javascript"></script>
  <script>
    function checkPasswords()
    {
      var pass1 = document.getElementById("password1");
      var pass2 = document.getElementById("password2");

      if (pass1.value != pass2.value)
        pass1.setCustomValidity("Your passwords do not match. Please recheck that your new password is entered identically in the two fields.");
      else
        pass1.setCustomValidity("");

      var v = document.getElementById("validity");
      if (v)
      {
        // v.innerHTML = document.passwordChange.password1.validity.customError;
        v.innerHTML = document.passwordChange.password1.validationMessage;
      }
    }

    function invalidHandler(evt)
    {
      // set the label's text color to red
      evt.srcElement.style.background = 'red';
      // stop the event from propagating higher
      evt.stopPropagation();
      // stop the browser's default handling of the validation error
      evt.preventDefault();
    }

    // function validHandler(evt)
    // {
    //   // set the label's text color to red
    //   evt.srcElement.style.background = 'white';
    //   // stop the event from propagating higher
    //   evt.stopPropagation();
    //   // stop the browser's default handling of the validation error
    //   evt.preventDefault();
    // }

    function loadDemo() {

      $('check').click(checkPasswords);

      // register an event handler on the form to
      // handle all invalid control notifications
      document.passwordChange.addEventListener("invalid", invalidHandler, true);
      // document.passwordChange.addEventListener("valid", validHandler, true);
    }

    window.addEventListener("load", loadDemo, false);
  </script>
</head>
<body>
  <form name="passwordChange">
  <p>
    <label for="password1">
      New Password:</label>
    <input type="password" id="password1" onchange="checkPasswords()"></p>
  <p>
    <label for="password2">
      Confirm Password:</label>
    <input type="password" id="password2" onchange="checkPasswords()"></p>
  <p>

  </form>
  <button id="check">
    Check Validity</button>
  <div id="validity">
  </div>
</body>
</html>
